-- Enterprise SAP Legacy Database (Production ERP)
-- Subset of egg-economy-sap: Farm, Coop, Hen, LayReport tables only.
-- Container/Consumer/Storage entities live in the distribution system.

-- ============================================================
-- FARM MASTER (ZFARM_MSTR)
-- ============================================================
CREATE TABLE ZFARM_MSTR (
    MANDT           VARCHAR(3) NOT NULL DEFAULT '100',
    WERKS           VARCHAR(4) NOT NULL,
    BUKRS           VARCHAR(4) NOT NULL DEFAULT '1000',
    FARM_NM         VARCHAR(60) NOT NULL,
    FARM_TYP_CD     VARCHAR(1) NOT NULL,
    ZONE_CD         VARCHAR(30) NOT NULL,
    EIGR            VARCHAR(60),
    ERNAM           VARCHAR(12) NOT NULL,
    ERDAT           VARCHAR(8) NOT NULL,
    ERZET           VARCHAR(6) NOT NULL DEFAULT '000000',
    AENAM           VARCHAR(12) NOT NULL,
    AEDAT           VARCHAR(8) NOT NULL,
    AEZET           VARCHAR(6) NOT NULL DEFAULT '000000',
    PRIMARY KEY (MANDT, WERKS)
);

ALTER TABLE ZFARM_MSTR REPLICA IDENTITY FULL;

-- ============================================================
-- STALL MASTER (ZSTALL_MSTR) - Coops
-- ============================================================
CREATE TABLE ZSTALL_MSTR (
    MANDT           VARCHAR(3) NOT NULL DEFAULT '100',
    STALL_NR        VARCHAR(10) NOT NULL,
    WERKS           VARCHAR(4) NOT NULL,
    STALL_NM        VARCHAR(60) NOT NULL,
    KAPZT           INTEGER NOT NULL,
    STALL_TYP_CD    VARCHAR(1) NOT NULL,
    ERNAM           VARCHAR(12) NOT NULL,
    ERDAT           VARCHAR(8) NOT NULL,
    ERZET           VARCHAR(6) NOT NULL DEFAULT '000000',
    AENAM           VARCHAR(12) NOT NULL,
    AEDAT           VARCHAR(8) NOT NULL,
    AEZET           VARCHAR(6) NOT NULL DEFAULT '000000',
    PRIMARY KEY (MANDT, STALL_NR)
);

ALTER TABLE ZSTALL_MSTR REPLICA IDENTITY FULL;

-- ============================================================
-- EQUIPMENT HEN (ZEQUI_HEN)
-- ============================================================
CREATE TABLE ZEQUI_HEN (
    MANDT           VARCHAR(3) NOT NULL DEFAULT '100',
    EQUNR           VARCHAR(18) NOT NULL,
    STALL_NR        VARCHAR(10) NOT NULL,
    HENNE_NM        VARCHAR(60) NOT NULL,
    RASSE_CD        VARCHAR(3) NOT NULL,
    GEB_DT          VARCHAR(8),
    STAT_CD         VARCHAR(1) DEFAULT 'A',
    ERNAM           VARCHAR(12) NOT NULL,
    ERDAT           VARCHAR(8) NOT NULL,
    ERZET           VARCHAR(6) NOT NULL DEFAULT '000000',
    AENAM           VARCHAR(12) NOT NULL,
    AEDAT           VARCHAR(8) NOT NULL,
    AEZET           VARCHAR(6) NOT NULL DEFAULT '000000',
    PRIMARY KEY (MANDT, EQUNR)
);

ALTER TABLE ZEQUI_HEN REPLICA IDENTITY FULL;

-- ============================================================
-- LAY REPORT (ZAFRU_LEGE)
-- ============================================================
CREATE TABLE ZAFRU_LEGE (
    MANDT           VARCHAR(3) NOT NULL DEFAULT '100',
    AUFNR           VARCHAR(12) NOT NULL,
    EQUNR           VARCHAR(18) NOT NULL,
    WERKS           VARCHAR(4) NOT NULL,
    BUKRS           VARCHAR(4) NOT NULL DEFAULT '1000',
    EI_MENGE        INTEGER NOT NULL,
    ERFAS_DT        VARCHAR(8) NOT NULL,
    ERFAS_ZT        VARCHAR(6),
    QUAL_CD         VARCHAR(1) DEFAULT 'A',
    ERNAM           VARCHAR(12) NOT NULL,
    ERDAT           VARCHAR(8) NOT NULL,
    ERZET           VARCHAR(6) NOT NULL DEFAULT '000000',
    AENAM           VARCHAR(12) NOT NULL,
    AEDAT           VARCHAR(8) NOT NULL,
    AEZET           VARCHAR(6) NOT NULL DEFAULT '000000',
    PRIMARY KEY (MANDT, AUFNR)
);

ALTER TABLE ZAFRU_LEGE REPLICA IDENTITY FULL;

-- ============================================================
-- SEED DATA
-- ============================================================

INSERT INTO ZFARM_MSTR (MANDT, WERKS, BUKRS, FARM_NM, FARM_TYP_CD, ZONE_CD, EIGR, ERNAM, ERDAT, ERZET, AENAM, AEDAT, AEZET) VALUES
('100', '1000', '1000', 'Sonnenhof Megafarm',   'M', 'north', 'Heinrich Mueller', 'HMUELLE',  '20150301', '080000', 'HMUELLE',  '20241115', '142200'),
('100', '2000', '1000', 'Gruener Hof',           'L', 'south', 'Anna Schmidt',     'ASCHMIDT', '20180615', '093000', 'ASCHMIDT', '20250820', '110500'),
('100', '3000', '1000', 'Berghof Homestead',     'H', 'east',  'Klaus Weber',      'HMUELLE',  '20200101', '070000', 'KWEBER',   '20200101', '070000');

INSERT INTO ZSTALL_MSTR (MANDT, STALL_NR, WERKS, STALL_NM, KAPZT, STALL_TYP_CD, ERNAM, ERDAT, ERZET, AENAM, AEDAT, AEZET) VALUES
('100', '0000000001', '1000', 'Mega Stall Alpha', 500, 'C', 'HMUELLE',  '20150401', '100000', 'HMUELLE',  '20230310', '091500'),
('100', '0000000002', '1000', 'Mega Stall Beta',  500, 'C', 'HMUELLE',  '20150415', '100000', 'HMUELLE',  '20150415', '100000'),
('100', '0000000003', '2000', 'Freiland Stall',   100, 'F', 'ASCHMIDT', '20180701', '110000', 'ASCHMIDT', '20180701', '110000'),
('100', '0000000004', '3000', 'Berg Stall',        25, 'B', 'KWEBER',   '20200201', '080000', 'KWEBER',   '20200201', '080000');

INSERT INTO ZEQUI_HEN (MANDT, EQUNR, STALL_NR, HENNE_NM, RASSE_CD, GEB_DT, STAT_CD, ERNAM, ERDAT, ERZET, AENAM, AEDAT, AEZET) VALUES
('100', '000000000000000001', '0000000001', 'Henne Greta',  'RIR', '20230115', 'A', 'HMUELLE',  '20230115', '060000', 'HMUELLE',  '20230115', '060000'),
('100', '000000000000000002', '0000000001', 'Henne Liesel', 'LEG', '20230220', 'A', 'HMUELLE',  '20230220', '060000', 'HMUELLE',  '20230220', '060000'),
('100', '000000000000000003', '0000000002', 'Henne Berta',  'PLY', '20220801', 'A', 'HMUELLE',  '20220801', '060000', 'HMUELLE',  '20220801', '060000'),
('100', '000000000000000004', '0000000003', 'Henne Frieda', 'SUS', '20230601', 'A', 'ASCHMIDT', '20230601', '060000', 'ASCHMIDT', '20230601', '060000'),
('100', '000000000000000005', '0000000003', 'Henne Klara',  'RIR', '20230915', 'A', 'ASCHMIDT', '20230915', '060000', 'ASCHMIDT', '20230915', '060000'),
('100', '000000000000000006', '0000000004', 'Henne Rosa',   'ORG', '20240101', 'A', 'KWEBER',   '20240101', '060000', 'KWEBER',   '20240101', '060000'),
('100', '000000000000000007', '0000000001', 'Henne Elsa',   'LEG', '20220315', 'R', 'HMUELLE',  '20220315', '060000', 'HMUELLE',  '20251201', '103000');

INSERT INTO ZAFRU_LEGE (MANDT, AUFNR, EQUNR, WERKS, BUKRS, EI_MENGE, ERFAS_DT, ERFAS_ZT, QUAL_CD, ERNAM, ERDAT, ERZET, AENAM, AEDAT, AEZET) VALUES
('100', '000001000001', '000000000000000001', '1000', '1000', 3, '20260201', '063000', 'A', 'HMUELLE',  '20260201', '063000', 'HMUELLE',  '20260201', '063000'),
('100', '000001000002', '000000000000000002', '1000', '1000', 2, '20260201', '064500', 'A', 'HMUELLE',  '20260201', '064500', 'HMUELLE',  '20260201', '064500'),
('100', '000001000003', '000000000000000003', '1000', '1000', 4, '20260201', '070000', 'D', 'HMUELLE',  '20260201', '070000', 'HMUELLE',  '20260201', '070000'),
('100', '000001000004', '000000000000000004', '2000', '1000', 2, '20260201', '071500', 'A', 'ASCHMIDT', '20260201', '071500', 'ASCHMIDT', '20260201', '071500'),
('100', '000001000005', '000000000000000005', '2000', '1000', 1, '20260201', '073000', 'B', 'ASCHMIDT', '20260201', '073000', 'ASCHMIDT', '20260201', '073000'),
('100', '000001000006', '000000000000000006', '3000', '1000', 1, '20260201', '080000', 'A', 'KWEBER',   '20260201', '080000', 'KWEBER',   '20260201', '080000'),
('100', '000001000007', '000000000000000001', '1000', '1000', 4, '20260202', '063000', 'A', 'HMUELLE',  '20260202', '063000', 'HMUELLE',  '20260202', '063000'),
('100', '000001000008', '000000000000000004', '2000', '1000', 3, '20260202', '071500', 'A', 'ASCHMIDT', '20260202', '071500', 'ASCHMIDT', '20260202', '071500');

CREATE PUBLICATION sap_pub FOR ALL TABLES;
